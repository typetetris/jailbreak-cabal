cabal-version: 2.0
name: cabal-plan
version: 0.4.0.0
license: GPL-2
license-file: LICENSE.GPLv2 LICENSE.GPLv3 src-topograph/LICENSE
copyright: 2016 Herbert Valerio Riedel
maintainer: hvr@gnu.org
author: Herbert Valerio Riedel
tested-with: ghc ==8.4.3 ghc ==8.2.2 ghc ==8.0.2 ghc ==7.10.3
             ghc ==7.8.4 ghc ==7.6.3
bug-reports: https://github.com/hvr/cabal-plan/issues
synopsis: Library and utiltity for processing cabal's plan.json file
description:
    This package provides a library for decoding @plan.json@ files as
    well as the simple tool @cabal-plan@ for extracting and pretty printing
    the information contained in the @plan.json@ file.
    .
    @plan.json@ files are generated by [cabal](https://hackage.haskell.org/package/cabal-install)'s [nix-style local builds](http://cabal.readthedocs.io/en/latest/nix-local-build.html) and contain detailed information about the build/install plan computed by the cabal solver.
category: Development
x-spdx-license-identifier: GPL-2.0-or-later
build-type: Simple
extra-source-files:
    ChangeLog.md

source-repository head
    type: git
    location: https://github.com/hvr/cabal-plan

flag exe
    description:
        Enable @exe:cabal-plan@ component

flag license-report
    description:
        Enable @license-report@ sub-command (only relevant when the @exe@ flag is active)
    default: False
    manual: True

flag _
    description:
        Enable underlining of primary unit-ids
    default: False
    manual: True

library
    exposed-modules:
        Cabal.Plan
    hs-source-dirs: src
    default-language: Haskell2010
    other-extensions: OverloadedStrings GeneralizedNewtypeDeriving
                      RecordWildCards
    ghc-options: -Wall
    build-depends:
        base -any,
        aeson -any,
        bytestring -any,
        containers -any,
        text -any,
        directory -any,
        filepath -any,
        base16-bytestring -any

library topograph
    exposed-modules:
        Topograph
    hs-source-dirs: src-topograph
    default-language: Haskell2010
    other-extensions: RankNTypes ScopedTypeVariables RecordWildCards
    build-depends:
        base -any,
        base-compat -any,
        base-orphans -any,
        containers -any,
        vector -any

executable cabal-plan
    main-is: cabal-plan.hs
    hs-source-dirs: src-exe
    other-modules:
        Paths_cabal_plan
        LicenseReport
    autogen-modules:
        Paths_cabal_plan
    default-language: Haskell2010
    other-extensions: RecordWildCards
    ghc-options: -Wall
    
    if flag(exe)
        build-depends:
            cabal-plan -any,
            topograph -any,
            base -any,
            text -any,
            containers -any,
            bytestring -any,
            directory -any,
            mtl -any,
            ansi-terminal -any,
            base-compat -any,
            optparse-applicative -any,
            parsec -any,
            vector -any
        
        if flag(license-report)
            build-depends:
                Cabal -any,
                tar -any,
                zlib -any,
                filepath -any
        
        if !impl(ghc >=8.0)
            build-depends:
                semigroups -any
        
        if flag(_)
            cpp-options: -DUNDERLINE_SUPPORT
    else
        buildable: False
